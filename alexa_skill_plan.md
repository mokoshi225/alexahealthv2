## 最終的なAlexaスキルの案

 1.  **スキル起動時の処理:**
  *   DynamoDBから最近のユーザーの症状データを取得します。
  *   取得した症状リストをもとに、質問のリストを作成します。

 2.  **症状ごとの質問:**
  *   順番に症状について質問します。
  *   例: 「発熱はありますか？ 強い / 少し / 無い」
  *   ユーザーの回答を記録し、症状の有無を判定します。

 3.  **新しい症状の確認:**
  *   全ての症状について質問した後、「他に気になる症状はありますか？」と尋ねます。
  *   ユーザーには、症状を自由記述で登録してもらいます。
  *   ユーザーが複数の症状を同時に回答した場合、自然言語処理を用いて症状を分割し、個別の症状として認識します。
  *   自由記述で登録された症状は「あり」と判定します。

 4.  **症状名の標準化:**
  *   自由記述で登録された症状名に対して、類似度計算、自然言語処理、または手動でのマッピングを用いて、既存の症状リストの症状名に標準化します。

 5.  **データ記録と終了:**
  *   今日あった症状と、その強さをDynamoDBに記録します。
  *   スキルを終了します。

 ## 実現に向けたプロンプト

 ### スキル起動時

 ```text
 ユーザー: アレクサ、症状記録スキルを起動して
 スキル: こんにちは。今日の症状についてお伺いします。
 ```

 ### 症状ごとの質問

 ```text
 スキル: 発熱はありますか？ 強い / 少し / 無い
 ユーザー: 強い
 スキル: めまいはありますか？ 強い / 少し / 無い
 ユーザー: 無い
 ...
 ```

 ### 新しい症状の確認

 ```text
 スキル: 他に気になる症状はありますか？症状を自由にお話しください。
 ユーザー: 頭がズキズキして吐き気がします。
 スキル: 頭痛と吐き気があるのですね。頭痛は強いですか？ 少しですか？ 無いですか？
 ユーザー: 強いです。
 スキル: 吐き気の強さは、強いですか？ 少しですか？ 無いですか？
 ユーザー: 少しです。
 ```

 ### データ記録と終了

 ```text
 スキル: ありがとうございます。今日の症状を記録しました。
 ```

 ## Mermaid図

 ```mermaid
 sequenceDiagram
  participant User
  participant AlexaSkill
  participant DynamoDB

  User->>AlexaSkill: スキル起動
  AlexaSkill->>DynamoDB: 症状データ取得
  DynamoDB-->>AlexaSkill: 症状リスト
  loop 症状リスト
  AlexaSkill->>User: 症状の質問 (強い/少し/無い)
  User->>AlexaSkill: 回答
  AlexaSkill->>DynamoDB: 回答を元に症状の有無を判定
  end
  AlexaSkill->>User: 他の症状の確認 (自由記述)
  User->>AlexaSkill: 症状を自由記述 (複数症状)
  AlexaSkill->>自然言語処理: 症状を分割
  自然言語処理-->>AlexaSkill: 分割された症状リスト
  loop 分割された症状リスト
  AlexaSkill->>症状名の標準化: 類似度計算/自然言語処理/手動マッピング
  症状名の標準化-->>AlexaSkill: 標準化された症状名
  end
  AlexaSkill->>DynamoDB: 症状と回答を記録
  DynamoDB-->>AlexaSkill: 記録完了
  AlexaSkill->>User: スキル終了